<loader loading="loading"></loader>
<div id="power-usage">
  <form class="power-usage__form" role="form" action="">
    <section>
      <div class="columns col-md-12 col-sm-12">
        <div class="page-content-box">
          <h5>Power Information</h5>

          <div class="table row overview-config-table">

            <div class="table__body">
              <div class="table__row">
                <div class="table__cell">Power Consumption</div>
                <div class="table__cell" class="padding-right">{{ power_consumption || 'NA' }}
                </div>
              </div>
              <div class="table__row">
                <div class="table__cell">Enable Power Cap</div>
                <div class="table__cell" class="padding-right">


                  <div class="toggle-container">
                    <div class="toggle">
                      <input id="toggle__switch-round" class="toggle-switch toggle-switch__round-flat" type="checkbox"
                        tabindex="0" ng-model="power_cap.PowerCapEnable" ng-checked="power_cap.PowerCapEnable" />
                      <label for="toggle__switch-round" tabindex="0">
                        <span class="uid-switch__status">{{
                            power_cap.PowerCapEnable ? "on" : "off"
                          }}</span></label>
                    </div>
                    <span>
                      {{ power_cap.PowerCapEnable ? "On" : "Off" }}
                    </span>
                  </div>


                </div>
              </div>
              <div class="table__row">
                <div class="table__cell"><span ng-show="!editPowerCap">Set </span>Limit in Watts</div>
                <div class="table__cell edit-box">

                  <!--start config table-->
                  <div class="table row column">
                    <div class="table__body">
                      <div class="table__row">
                        <div class="table__cell">
                          <span ng-show="!power_cap.PowerCapEnable">
                             {{ (!powerCap) ? 'Not Set' : powerCap }}
                          </span>

                          <input ng-show="power_cap.PowerCapEnable"
                            ng-class="editPowerCap ? 'hideborders' : 'showborders'" id="power-cap" type="number"
                            min="100" max="10000" step="1" ng-disabled="editPowerCap"
                            ng-model="powerCap" />

                        </div>
                        <div class="table__cell action-wrapper" ng-show="power_cap.PowerCapEnable">

                          <div class="bmc-table__row-actions ng-scope">
                            <button ng-show="!editPowerCap" class="btn btn-primary btn-small" ng-click="setPowerCap()">
                              <icon alt="Save" title="Save" file="icon-check.svg" aria-hidden="true"></icon>
                            </button>
                            <button ng-show="editPowerCap" class="btn btn-primary btn-small"
                              ng-click="editPowerCap=false">
                              <icon alt="Edit" title="Edit" file="icon-edit.svg" aria-hidden="true"></icon>
                            </button>
                            <button ng-show="!editPowerCap" class="btn btn-primary btn-small" ng-click="editPowerCap=true;unsetPowerCap()">
                              <icon alt="Cancel" title="Cancel" file="icon-close.svg" aria-hidden="true"></icon>
                            </button>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                  <!--end config table-->

                </div>
              </div>
              <div class="table__row">
                <div class="table__cell">Limit Actions</div>
                <div class="table__cell" class="padding-right">{{ LimitException }}
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
  </form>
  </section>
</div>

<br clear="all">

<div ng-show="0">
  <h1 class="page-title">Manage Power Usage</h1>
  <form class="power-usage__form" role="form" action="">
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Power information</h2>
      </div>
      <dl class="list-pair">
        <dt>Power Consumption</dt>
        <dd>{{ power_consumption }}</dd>
      </dl>
    </section>
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">
          Server power cap setting
        </h2>
      </div>
      <div class="section-content">
        <p>
          Set a power cap to keep power consumption at or below the specified
          value in watts.
        </p>
        <div class="toggle-container">
          <div class="toggle">
            <input id="toggle__switch-round" class="toggle-switch toggle-switch__round-flat" type="checkbox"
              tabindex="0" ng-model="power_cap.PowerCapEnable" ng-checked="power_cap.PowerCapEnable" />
            <label for="toggle__switch-round" tabindex="0">Server power cap setting is
              <span class="uid-switch__status">{{
                power_cap.PowerCapEnable ? "on" : "off"
              }}</span></label>
          </div>
          <span>
            {{ power_cap.PowerCapEnable ? "On" : "Off" }}
          </span>
        </div>
      </div>
      <div class="section-content form__field">
        <label for="power-cap" class="content-label">POWER CAP VALUE IN WATTS</label>
        <input id="power-cap" type="number" min="100" max="10000" step="1" ng-disabled="!power_cap.PowerCapEnable"
          ng-model="power_cap.PowerCap" />
      </div>
    </section>
    <div class="form__actions">
      <button type="submit" class="btn-primary" ng-click="setPowerCap()">
        Save settings
      </button>
      <button type="button" class="btn btn-secondary" ng-click="refresh()">
        Cancel
      </button>
    </div>
  </form>
</div>