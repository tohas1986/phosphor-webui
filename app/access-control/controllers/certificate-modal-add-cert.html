<div class="uib-modal__content">
  <div class="modal-header">
    <h2 class="modal-title" id="modal_label">
      {{action}} certificate <span ng-show="action=='Replace' && cert.Issuer.CommonName">--
        {{cert.Issuer.CommonName}}</span>
    </h2>
    <button type="button" class="btn  btn--close" ng-click="$dismiss()" aria-label="close">
      <icon file="icon-close.svg" aria-hidden="true"></icon>
    </button>
  </div>
  <form name="addCertForm" id="addCertForm" ng-class="{'submitted': submitted}">
    <div class="modal-body">
      <div class="form__field" ng-show="action=='Add'">
        <label class="content-label" for="certType">Certificate type</label>
        <select class="cert-dropdown" id="certType" name="certType" ng-model="newCertificate.selectedType" required>
          <option ng-value="">Select</option>
          <option ng-value="type" ng-repeat="type in availableCertificateTypes">
            {{ type.name }}
          </option>
        </select>
        <div ng-messages="addCertForm.certType.$error" class="form-error"
          ng-class="{'visible' : addCertForm.certType.$touched || submitted }">
          <p ng-message="required">Field is required</p>
        </div>
      </div>
      <div class="file-upload">

        <label for="upload_cert_new" class="" ng-show="action=='Add'">
          <input name="uploadCertNew" id="upload_cert_new" type="file" file="newCertificate.file" class="hide" />
          <span class="btn btn-secondary">Choose a file</span>

          <button type="reset" class="btn file-upload-reset" ng-if="newCertificate.file.name"
            ng-click="newCertificate.file = '';" aria-label="remove selected file">
            <icon file="icon-close.svg" aria-hidden="true"></icon>
          </button>

          <span class="inline"><span ng-hide="newCertificate.file">No file chosen</span><span
              ng-show="newCertificate.file">{{ newCertificate.file.name }}</span></span>
        </label>


        <label for="upload_cert_replace" class="" ng-show="action=='Replace'">
          <input name="uploadCertReplace" id="upload_cert_replace" type="file" file="cert.file" class="hide" />
          <span class="btn btn-secondary">Choose a file</span>


          <button type="reset" class="btn file-upload-reset" ng-if="cert.file.name" ng-click="cert.file = '';"
            aria-label="remove selected file">
            <icon file="icon-close.svg" aria-hidden="true"></icon>
          </button>

          <span class="inline"><span ng-hide="cert.file">No file chosen</span><span
              ng-show="cert.file">{{ cert.file.name }}</span></span>
        </label>

      </div>
    </div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" ng-click="$dismiss(); addCertForm.$setUntouched();">
    Cancel
  </button>
  <button ng-show="action == 'Add'" type="submit" class="btn btn-primary"
    ng-click="submitted = true; uploadCertificate(); $dismiss()"
    ng-disabled="addCertForm.$invalid || !newCertificate.file">
    Save
  </button>
  <button ng-show="action == 'Replace'" type="submit" class="btn btn-primary"
    ng-click="submitted = true; replaceCertificate(cert); $dismiss()" ng-disabled="!cert.file">
    Replace
  </button>
</div>
</form>
</div>