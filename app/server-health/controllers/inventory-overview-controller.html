<div id="hardware_status">

  <section class="page-content-box toggle-filter row">

    <div class="columns col-md-1 col-sm-12"><label class="trim-text-medium">Show:</label>
    </div>

    <div class="columns col-sm-6 col-6" ng-repeat="type in hardwareList"
      ng-class="(type == 'Add-in Cards') ? 'col-md-3' : 'col-md-2'">
      <div class='filter-box'>
        <button class="filter-btn" ng-click="toggleHardware(type)"
          ng-class="(selectedHardwareType == type) ? 'btn-filter-primary' : 'btn-filter-secondary'">
          <span class="">&#9679;</span>&nbsp;{{type}}
        </button>
      </div>
    </div>

  </section>

  <section class="page-content-box" ng-show="selectedHardwareType=='PCIe Devices'">

    <div class="columns col-lg-4 col-md-4 col-sm-12"><label class="trim-text-medium">
        Search hardware components:</label>
    </div>
    <div class="columns col-md-8 col-sm-12">
      <div class="content__search search-box">
        <input id="content__search-input" placeholder="Keyword" type="text" ng-model="customSearch"
          ng-keydown="doSearchOnEnter($event)" />
        <div class="search-submit__wrapper">
          <button class="clear-input" ng-click="clear()">&#10005;</button>
          <input id="content__search-submit" type="submit" class="btn content__search-submit" value="Search"
            ng-click="doSearchOnClick()" />
        </div>
      </div>
    </div>

  </section>


  <div class="row">
    <section id="CPU_list" class="col" ng-show="selectedHardwareType=='CPUs' || selectedHardwareType=='All'" ng-class="{
        'col-md-4': (0 == CPUData.length) && (0 == (DimmTable | filter:filterDimms).length) && (0 == DriveData.length),
        'col-md-6': (6 >= CPUData.length && CPUData.length > 0) && (6 >= (DimmTable | filter:filterDimms).length && DriveData.length > 0),
         'col-12': (CPUData.length > 6)}">
      <div class="page-content-box">
        <div class="loader-holder text-center" ng-hide="!cpuLoading">
          <div ng-show="cpuLoading" class="spinner-border m-5 individual-component-loader" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
        <h5>CPUs</h5>

        <div ng-show="(CPUData | filter:filterBySearchTermsCPU).length === 0 && searchTerms.length">
          No CPUs match your search query.
        </div>
        <div ng-show="(CPUData | filter:filterBySearchTermsCPU).length === 0 && !searchTerms.length">
          No CPUs available to display.
        </div>

        <uib-tabset active="CPU_tabs" justified="true" ng-class="{ 'overflow-ht': (DimmTable | filter:filterDimms).length >= 1 || CPUData.length >= 1 }">

          <uib-tab id="CPU_tabs" index="$index" heading="{{CPU.Id}}"
            ng-repeat="CPU in CPUData | filter:filterBySearchTermsCPU" ng-value="$index">

            <table class="overview-config-table">
              <tr ng-repeat="(key, value) in CPU"
                ng-show="key.indexOf('@') != 0 && key.indexOf('Status') != 0 && key.indexOf('Id') != 0">
                <td>{{ parseNonSpacedWords(key) }}</td>
                <td>{{(value && value.VendorId) ? value.VendorId : value || 'NA'}}</td>
                <!-- <td *ng-If="value.ProcessorId">EffectiveFamily</td>
                <td *ng-If="value.ProcessorId">{{ value.EffectiveFamily }}</td> -->
              </tr>
            </table>

          </uib-tab>

        </uib-tabset>
      </div>
    </section>

    <section id="DIMM_list" class="col" ng-show="selectedHardwareType=='DIMMs' || selectedHardwareType=='All'" ng-class="{
      'col-md-4': (0 == CPUData.length) && (0 == (DimmTable | filter:filterDimms).length) && (0 == DriveData.length),
      'col-md-6': (6 >= CPUData.length && CPUData.length > 0) && (6 >= (DimmTable | filter:filterDimms).length && DriveData.length > 0),
         'col-12': ((DimmTable | filter:filterDimms).length > 6)}">

      <div class="page-content-box">
        <div class="loader-holder text-center" ng-hide="!dimmsLoading">
          <div ng-show="dimmsLoading" class="spinner-border m-5 individual-component-loader" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
        <h5>DIMMs</h5>

        <div ng-show="filteredDimms.length == 0 && searchTerms.length">
          No DIMMs match your search query.
        </div>
        <div ng-show="filteredDimms.length == 0 && !searchTerms.length">
          No DIMMs available to display.
        </div>

        <uib-tabset active="Dimm_tabs" ng-class="{ 'overflow-ht': (DimmTable | filter:filterDimms).length >= 1 || CPUData.length >= 1 }" justified="true" ng-show="7 > (DimmTable | filter:filterDimms).length">
          <uib-tab index="$index" heading="{{Dimm.Id}}"
            ng-repeat="Dimm in DimmTable | filter:filterBySearchTerms | filter:filterDimms | orderBy:sortKey"
            ng-value="$index">
            <table class="Dimm_table overview-config-table">
              <tr ng-repeat="(key, value) in Dimm"
                ng-show="key.indexOf('@') != 0 && key.indexOf('Status') != 0 && key.indexOf('Id') != 0 && key.indexOf('Name') != 0">
                <td>{{parseNonSpacedWords(key)}}</td>
                <td>{{value || 'N/A'}}</td>
              </tr>
            </table>
          </uib-tab>
        </uib-tabset>

        <div class="text-intro" ng-show="filteredDimms.length > 6 && filteredDimms.length != 0">
          <div class="trim-text-medium">
            <input type='checkbox' class="toggleDetailsVisibility" ng-click="toggleDIMMdetails = !toggleDIMMdetails;">
            Show Details
          </div>
        </div>

        <div class="table row column DIMM__table" ng-show="filteredDimms.length > 6 && filteredDimms.length != 0">
          <div class="table__head fixed-table-header">
            <div class="table__row">
              <div class="table__cell status-icon trim-text-medium"></div>
              <div class="table__cell sort_button_wrapper" ng-click='sortBy("Name")'>
                <div class="column col-10">Slot Number</div>
                <div class="column col-2"><span class="sortorder" ng-class="{reverse: reverse}"></span></div>
              </div>
              <div class="table__cell sort_button_wrapper" ng-click="sortBySeverity()">
                <div class="column col-10">Status</div>
                <div class="column col-2"><span class="sortorder" ng-class="{reverseSeverity: reverseSeverity}"></span>
                </div>
              </div>
              <div class="table__cell">Enabled</div>
              <div class="table__cell">Size</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDIMMdetails">Capacity MiB</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDIMMdetails">Memory Device Type</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDIMMdetails">Type</div>
            </div>
          </div>

          <div class="table__body">
            <div class="table__row sensor-row__{{sensor.Status.Health}}"
              ng-repeat="Dimm in filteredDimms = ( DimmTable | filter:filterBySearchTerms | filter:filterDimms | orderBy:sortKey:reverse)">
              <div class="table__cell status-icon status__{{Dimm.Status.Health}} trim-text-medium">&nbsp;
              </div>
              <div class="table__cell">{{Dimm.Id || 'N/A'}}</div>
              <div class="table__cell sensor__status">{{Dimm.Status.Health || 'N/A'}}</div>
              <div class="table__cell">{{Dimm.Status.State || 'N/A'}}</div>
              <div class="table__cell">{{Dimm.DataWidthBits || 'N/A'}}</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDIMMdetails">{{Dimm.MemoryDeviceType || 'N/A'}} /
                {{Dimm.MemoryType || 'N/A'}}</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDIMMdetails">{{Dimm.CapacityMiB || 'N/A'}}</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDIMMdetails">{{Dimm.MemoryDeviceType || 'N/A'}}
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>
    <section id="drives_list" class="col" ng-show="selectedHardwareType=='Drives' || selectedHardwareType=='All'"
      ng-class="{
        'col-md-4': (0 == CPUData.length) && (0 == (DimmTable | filter:filterDimms).length) && (0 == DriveData.length),
         'col-12': (DriveData.length > 0 || CPUData.length > 0 || (DimmTable | filter:filterDimms).length > 0)}">
      <div class="page-content-box">
        <div class="loader-holder text-center" ng-hide="!drivesLoading">
          <div ng-show="drivesLoading" class="spinner-border m-5 individual-component-loader" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
        <h5 ng-class="(DriveData.length > 0 && filteredDriveData.length != 0) ? 'float-left' : ''">Drives</h5>

        <div ng-show="(DriveData | filter:filterBySearchTerms).length == 0">
          No drives available to display.
        </div>

        <div class="text-intro" ng-show="(DriveData.length > 1) && (filteredDriveData.length != 0)">
          <div class="trim-text-medium inline">
            <input type='checkbox' ng-click="toggleDrivedetails = !toggleDrivedetails;">
            Show
            Details
          </div>
          <div class="trim-text-medium inline">
            <input type='checkbox' ng-click="toggleDrive = !toggleDrive;">
            Show
            Disabled
          </div>
        </div>

        <div class="table row column Drive__table" ng-show="DriveData.length > 0 && filteredDriveData.length != 0">

          <div class="table__head">
            <div class="table__row">
              <div class="table__cell sort_button_wrapper status-icon_wrapper" ng-click='sortDriveBy("Name")'
                ng-class="{reverse: reverse}">
                Slot Number
              </div>
              <div class="table__cell status-icon trim-text-medium"></div>
              <div class="table__cell sort_button_wrapper" ng-click='sortDriveBy("Manufacturer")'
                ng-class="{reverse: reverse}" ng-show="toggleDrivedetails">
                Manufacturer
              </div>
              <div class="table__cell">
                Status
              </div>
              <div class="table__cell">
                State
              </div>
              <div class="table__cell sort_button_wrapper" ng-click='sortDriveBy("Model")' ng-show="toggleDrivedetails"
                ng-class="{reverse: reverse}">
                Model
              </div>
              <div class="table__cell sort_button_wrapper" ng-click='sortDriveBy("PartNumber")'
                ng-show="toggleDrivedetails" ng-class="{reverse: reverse}">
                Part Number
              </div>
              <div class="table__cell sort_button_wrapper" ng-click='sortDriveBy("Model")' ng-show="toggleDrivedetails"
                ng-class="{reverse: reverse}">
                Serial Number
              </div>
            </div>
          </div>
          <div class="table__body">
            <div class="table__row sensor-row__{{sensor.Status.Health}}"
              ng-repeat="drive in filteredDriveData = ( DriveData | filter:filterBySearchTerms | filter:filterByState | orderBy:sortDriveKey:reverse)">
              <div class="table__cell status-icon status__{{drive.Status.Health}} trim-text-medium">&nbsp;
              </div>
              <div class="table__cell">{{drive.Name || 'N/A'}}</div>
              <div class="table__cell" ng-show="toggleDrivedetails">{{drive.Manufacturer || 'N/A'}}</div>
              <div class="table__cell">{{drive.Status.Health}}</div>
              <div class="table__cell">{{drive.Status.State}}</div>
              <div class="table__cell" ng-show="toggleDrivedetails">{{drive.Model || 'N/A'}}</div>
              <div class="table__cell" ng-show="toggleDrivedetails">{{drive.PartNumber || 'N/A'}}</div>
              <div class="table__cell" ng-show="toggleDrivedetails">{{drive.SerialNumber || 'N/A'}}</div>
            </div>
          </div>

        </div>

      </div>
    </section>

  </div>

  <div class="row">
    <section id="Devices_list" class="col" ng-show="selectedHardwareType=='PCIe Devices' || selectedHardwareType=='All'">
      <div class="page-content-box">
        <div class="loader-holder text-center" ng-hide="!devicesLoading">
          <div ng-show="devicesLoading" class="spinner-border m-5 individual-component-loader" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>
        <h5 ng-class="(PCIData.length > 7 && filteredPCIData.length != 0) ? 'float-left' : ''">PCIe Devices</h5>

        <div ng-show="filteredPCIData.length == 0">
          No PCIe devices available to display.
        </div>

        <div ng-show="PCIData.length > 7 && filteredPCIData.length != 0">
          <div class="text-intro">
            <div class="trim-text-medium">
              <input type='checkbox' ng-click="toggleDevices = !toggleDevices;"> Show
              Details
            </div>
          </div>
          <div class="text-intro">
            <div class="trim-text-medium">
              <input type='checkbox' ng-checked="showasGroups" ng-click="sortPCIBy(sortPCIKey,true)">
              Group
              by Device
            </div>
          </div>
        </div>

        <div class="table row Device__table" ng-show="PCIData.length > 7 && filteredPCIData.length != 0">
          <div class="table__head fixed-table-header">
            <div class="table__row">
              <div class="table__cell sort_button_wrapper" ng-click='sortPCIBy("DeviceId",false)'
                ng-class="{reverse: reverse}">
                Device ID
              </div>
              <div class="table__cell sort_button_wrapper" ng-click='sortPCIBy("ParentId",false)'
                ng-class="{reverse: reverse}">
                Device name
              </div>
              <div class="table__cell sort_button_wrapper" ng-click='sortPCIBy("DeviceId",false)'
                ng-class="{reverse: reverse}">
                Manufacturer
              </div>
              <div class="table__cell sort_button_wrapper" ng-click='sortPCIBy("DeviceClass",false)'
                ng-class="{reverse: reverse}">
                Device Class
              </div>
              <div class="table__cell trim-text-medium" ng-show="toggleDevices">Subsystem ID</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDevices">Revision ID</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDevices">Subsystem Vendor ID</div>
            </div>
          </div>
          <div class="table__body">

            <div class="table__row"
              ng-repeat="device in filteredPCIData = (PCIData  | orderBy:sortPCIKey:reverse | filter:filterBySearchTermsPCI)"
              ng-class="(device.EvenOdd || !showasGroups ? '' : 'device_group') + ' ' +  (device.GroupedBy && showasGroups ? 'device_sep' : '')">
              <div class="table__cell">{{device.DeviceId}}</div>
              <div class="table__cell">{{device.ParentId}}</div>
              <div class="table__cell">
                <span ng-show="device.GroupedBy || !showasGroups">{{device.Manufacturer}}</span>
                <span ng-show="!device.GroupedBy && showasGroups">&#8230;</span>
              </div>
              <div class="table__cell">{{parseNonSpacedWords(device.DeviceClass)}}</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDevices">{{device.SubsystemId}}</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDevices">{{device.RevisionId}}</div>
              <div class="table__cell trim-text-medium" ng-show="toggleDevices">{{device.SubsystemVendorId}}</div>

            </div>

          </div>

        </div>
    </section>
  </div>

</div>